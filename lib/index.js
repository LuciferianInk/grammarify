"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b=_toPropertyKey(b),b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,_toPropertyKey(c.key),c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _toPropertyKey(a){var b=_toPrimitive(a,"string");return"symbol"===_typeof(b)?b:b+""}function _toPrimitive(a,b){if("object"!==_typeof(a)||null===a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var d=c.call(a,b||"default");if("object"!==_typeof(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}var Grammarify=function(){function a(b){_classCallCheck(this,a),this.substitutionMap=b,this.preProcessMap=new Grammarify_PreProcess,this.smsMap=new Grammarify_SMS(this.substitutionMap),this.disconnectedMap=new Grammarify_Disconnected}return _createClass(a,[{key:"clean",value:function clean(a){if(0===a.length)return"";if(a.match("(?://)"))return a;a=a.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,"\""),a=this.preProcessMap.fixPeriodAndEllipsis(a),a=this.preProcessMap.fixSpaceAfterCharacter(a);var b=a.split(" "),c=b.filter(function(a){return 0!==a.length});c=this.smsMap.fixStretching(c),c=this.smsMap.fixShorthand(c),c=this.disconnectedMap.fixSeparated(c);for(var d=[],e=0;e<c.length;e++)0<=c[e].indexOf(".")?d.push("."):0<=c[e].indexOf("!")?d.push("!"):0<=c[e].indexOf("?")?d.push("?"):d.push("");for(var f=["the","a","an","and","but","or","nor","for","so","yet"],g=!1,h="",j="",k="",l=0;l<c.length;l++){if(0<l&&c[l]===c[l-1].trim().toLowerCase()&&0<=f.indexOf(c[l].toLowerCase())){c.splice(l,1),l--;continue}k=c[l].match(/[\W]+$/g),j=null===k?c[l]:c[l].replace(/[\W]+$/g,""),0<l&&(g=""!==d[l-1]),(0==l||g&&[".","?","!","\""].includes(c[l-1].slice(-1))&&!c[l-1].endsWith("..")&&!c[l-2].endsWith(".."))&&(c[l]=c[l][0].toUpperCase()+c[l].substring(1)),0!=l&&"."!==c[l]&&(c[l]=" "+c[l])}var m=c.length-1;return h=c[m][c[m].length-1],"."!==h&&"!"!==h&&"?"!==h&&"\""!==h&&"\u201D"!==h&&(c[m]+="."),c.join("")}}]),a}();exports["default"]=Grammarify;function Grammarify_PreProcess(){var a=[",",";",":","%"],b=function(a,b){var c=new RegExp("^[ \\"+b+".]+","g");a=a.replace(c,""),c=new RegExp("\\b([ \\"+b+"]*\\"+b+"[ \\"+b+"]*)(\\b|$)","g");var d=a.match(c),e=0,f="";if(null!==d)for(var g=0;g<d.length;g++)e=a.indexOf(d[g],e),f=a.substr(e),f=e+d[g].length<a.length&&null!==a[e+d[g].length+1].match(/\d/)?f.replace(d[g],b):f.replace(d[g],b+" "),a=a.substr(0,e)+f,e++;return a};return{fixPeriodAndEllipsis:function fixPeriodAndEllipsis(a){a=a.replace(/^[ \.]+/g,"");var b=a.match(/\b([ \.]*\.[ \.]*)(\b|$)/g),c=0,d="";if(null!==b)for(var e=0;e<b.length;e++)if(c=a.indexOf(b[e],c),2==b[e].split(".").length){if(!b[e][0].endsWith(" ")){c++;continue}d=a.substr(c),d=d.replace(b[e],". "),a=a.substr(0,c)+d,c++}else 3<=b[e].split(".").length&&(d=a.substr(c),d=d.replace(b[e],"... "),a=a.substr(0,c)+d,c++);return a},fixSpaceAfterCharacter:function fixSpaceAfterCharacter(c){for(var d=0;d<a.length;d++)c=b(c,a[d]);return c}}}function Grammarify_SMS(a){var b=_objectSpread(_objectSpread({},{"2night":"tonight","2nite":"tonight",afaik:"as far as I know",afk:"away from keyboard",asap:"as soon as possible",asl:"American Sign Language","b/c":"because",bc:"because",bf:"boyfriend",brb:"be right back",btw:"by the way",couldnt:"couldn't",cu:"see you",cuz:"because",diy:"do it yourself",dont:"don't",dosent:"doesn't",eachother:"each other",eg:"example",els:"else",faq:"frequently asked questions",ftw:"for the win",fyi:"for your information",gf:"girlfriend",gl:"good luck",glhf:"good luck, have fun",goodluck:"good luck",gotta:"got to",gr8:"great",hada:"had a",hbu:"how about you",hes:"he's",hf:"have fun",hmu:"hit me up",howre:"how're",howve:"how've",hr:"hour",hrs:"hours",i:"I",id:"I'd",idk:"I don't know",iirc:"if I remember correctly",ill:"I'll",im:"I'm",isnt:"isn't",itll:"it'll",itt:"in this thread",ive:"I've",kinda:"kind of",lol:"LOL",msg:"message","n/a":"N/A",na:"N/A",nite:"night",noob:"newbie",omg:"oh my God",op:"original poster",pls:"please",plx:"please",plz:"please",pov:"point of view",ppl:"people",rofl:"ROFL",rtfm:"read the fucking manual",shes:"she's",tba:"to be announced",tbh:"to be honest",thatll:"that'll",thats:"that's",theres:"there's",theyd:"they'd",theyll:"they'll",theyre:"they're",theyve:"they've",tho:"though",thru:"through",tryna:"trying to",ty:"thank you",tyvm:"thank you very much",u:"you",ur:"your",w:"with","w/":"with","w/o":"without",wanna:"want to",weve:"we've",whaaat:"what",whaat:"what",whens:"when's",wheres:"where's",whos:"who's",whys:"why's",wk:"week",wks:"weeks",wo:"without",wont:"won't",wouldnt:"wouldn't",wtf:"what the fuck",wth:"what the Hell",wya:"where are you at",yknow:"you know",ymmv:"your mileage may vary",youd:"you'd",youll:"you'll",youre:"you're",youve:"you've"}),a),c=function(a,d,e){if("undefined"!=typeof b[a.toLowerCase()])return b[a.toLowerCase()];if(0===d.reduce(function(a,b){return a+(b.endIndex-b.startIndex)},0))return"";var f=0<e?e-1:d.length-1;return d[f].endIndex>d[f].startIndex?(--d[f].endIndex,a=a.substr(0,d[f].startIndex)+a.substr(d[f].startIndex+1)):0<e?--e:e=d.length-1,c(a,d,e)};return{fixStretching:function fixStretching(a){var b=[];if(Array.isArray(a))b=a;else if("string"==typeof a)b=a.split(" ");else return"";for(var d=[],e="",f=0;f<b.length;f++){for(var g=0;g<b[f].length;g++)0<g&&(b[f][g]===b[f][g-1]?""===e?(d.push({startIndex:g-1,endIndex:g}),e=b[f][g]):d[d.length-1].endIndex=g:e="");if(0<d.length&&"undefined"!=typeof b[f])for(var h="",k=JSON.parse(JSON.stringify(d)),l=0;l<k.length;l++){if(h=c(b[f],k,l),""!==h){b[f]=h;break}k=JSON.parse(JSON.stringify(d))}d=[],e=""}return b},fixShorthand:function fixShorthand(a){var c="",d=[],e="";if(Array.isArray(a))d=a;else if("string"==typeof a)d=a.split(" ");else return"";for(var f=0;f<d.length;f++)e=d[f].match(/([a-zA-Z0-9']*)([\?!\.;+]*)$/),""!=typeof e[2]&&(c=e[2]),e=e[1],"undefined"!=typeof b[e.toLowerCase()]&&(d[f]=b[e.toLowerCase()],""!==c&&(d[f]+=c,c=""));return d}}}function Grammarify_Disconnected(){var a=["awesome","everything","herself","himself","nowhere","today","yourself"];return{fixSeparated:function fixSeparated(b){var c=[];if(Array.isArray(b))c=b;else if("string"==typeof b)c=b.split(" ");else return"";var d=0;if(1<c.length)for(var e=1;e<c.length;e++)d=a.indexOf((c[e-1]+c[e]).toLowerCase()),0<=d&&(c[e-1]=a[d],c.splice(e,1),e--);return c}}}function Grammarify_Numbers(){}