"use strict";exports=module.exports=new Grammarify;function Grammarify(){var a=new Grammarify_PreProcess,b=new Grammarify_SMS,c=new Grammarify_Disconnected;return{clean:function clean(d){if(0===d.length)return"";if(d.match("(?://)"))return d;d=d.replace(/[\u2018\u2019]/g,"'").replace(/[\u201C\u201D]/g,"\""),d=a.fixPeriodAndEllipsis(d),d=a.fixSpaceAfterCharacter(d);var e=d.split(" "),f=e.filter(function(a){return 0!==a.length});f=b.fixStretching(f),f=b.fixShorthand(f),f=c.fixSeparated(f);for(var g=[],h=0;h<f.length;h++)0<=f[h].indexOf(".")?g.push("."):0<=f[h].indexOf("!")?g.push("!"):0<=f[h].indexOf("?")?g.push("?"):g.push("");for(var j=["the","a","an","and","but","or","nor","for","so","yet"],k=!1,l="",m="",n="",o=0;o<f.length;o++){if(0<o&&f[o]===f[o-1].trim().toLowerCase()&&0<=j.indexOf(f[o].toLowerCase())){f.splice(o,1),o--;continue}n=f[o].match(/[\W]+$/g),m=null===n?f[o]:f[o].replace(/[\W]+$/g,""),0<o&&(k=""!==g[o-1]),(0==o||k)&&(f[o]=f[o][0].toUpperCase()+f[o].substr(1)),0!=o&&(f[o]=" "+f[o])}var p=f.length-1;return l=f[p][f[p].length-1],"."!==l&&"!"!==l&&"?"!==l&&"\""!==l&&"'"!==l&&"\u201D"!==l&&"\u2019"!==l&&(f[p]+="."),f.join("")}}}function Grammarify_PreProcess(){var a=[",",";",":","%"],b=function(a,b){var c=new RegExp("^[ \\"+b+".]+","g");a=a.replace(c,""),c=new RegExp("\\b([ \\"+b+"]*\\"+b+"[ \\"+b+"]*)(\\b|$)","g");var d=a.match(c),e=0,f="";if(null!==d)for(var g=0;g<d.length;g++)e=a.indexOf(d[g],e),f=a.substr(e),f=e+d[g].length<a.length&&null!==a[e+d[g].length+1].match(/\d/)?f.replace(d[g],b):f.replace(d[g],b+" "),a=a.substr(0,e)+f,e++;return a};return{fixPeriodAndEllipsis:function fixPeriodAndEllipsis(a){a=a.replace(/^[ \.]+/g,"");var b=a.match(/\b([ \.]*\.[ \.]*)(\b|$)/g),c=0,d="";if(null!==b)for(var e=0;e<b.length;e++)c=a.indexOf(b[e],c),2==b[e].split(".").length?(d=a.substr(c),d=d.replace(b[e],". "),a=a.substr(0,c)+d,c++):3<=b[e].split(".").length&&(d=a.substr(c),d=d.replace(b[e],"... "),a=a.substr(0,c)+d,c++);return a},fixSpaceAfterCharacter:function fixSpaceAfterCharacter(c){for(var d=0;d<a.length;d++)c=b(c,a[d]);return c}}}function Grammarify_SMS(){var a={"2night":"tonight","2nite":"tonight",afaik:"as far as I know",afk:"away from keyboard",asap:"as soon as possible",asl:"American Sign Language","b/c":"because",bc:"because",bf:"boyfriend",brb:"be right back",btw:"by the way",couldnt:"couldn't",cu:"see you",cuz:"because",diy:"do it yourself",dont:"don't",dosent:"doesn't",eg:"example",els:"else",faq:"frequently asked questions",ftw:"for the win",fyi:"for your information",gf:"girlfriend",gl:"good luck",glhf:"good luck, have fun",goodluck:"good luck",gotta:"got to",gr8:"great",hada:"had a",hes:"he's",hf:"have fun",hmu:"hit me up",howre:"how're",howve:"how've",hr:"hour",hrs:"hours",i:"I",id:"I'd",idk:"I don't know",iirc:"if I remember correctly",im:"I'm",isnt:"isn't",itll:"it'll",itt:"in this thread",ive:"I've",kinda:"kind of",lol:"laughing out loud",msg:"message","n/a":"N/A",n00b:"newbie",na:"N/A",nite:"night",noob:"newbie",omg:"oh my God",op:"original poster",pls:"please",plx:"please",plz:"please",pov:"point of view",ppl:"people",rtfm:"read the fucking manual",shes:"she's",tba:"to be announced",tbh:"to be honest",thatll:"that'll",thats:"that's",theres:"there's",theyd:"they'd",theyll:"they'll",theyre:"they're",theyve:"they've",tho:"though",thru:"through",tryna:"trying to",ty:"thank you",tyvm:"thank you very much",u:"you",w:"with","w/":"with","w/o":"without",wanna:"want to",weve:"we've",whaaat:"what",whaat:"what",whens:"when's",wheres:"where's",whos:"who's",whys:"why's",wk:"week",wks:"weeks",wo:"without",wont:"won't",wouldnt:"wouldn't",wtf:"what the fuck",wth:"what the Hell",wya:"where are you at",yknow:"you know",ymmv:"your mileage may vary",youd:"you'd",youll:"you'll",youre:"you're",youve:"you've"},b=function(c,d,e){if("undefined"!=typeof a[c.toLowerCase()])return a[c.toLowerCase()];if(0===d.reduce(function(a,b){return a+(b.endIndex-b.startIndex)},0))return"";var f=0<e?e-1:d.length-1;return d[f].endIndex>d[f].startIndex?(--d[f].endIndex,c=c.substr(0,d[f].startIndex)+c.substr(d[f].startIndex+1)):0<e?--e:e=d.length-1,b(c,d,e)};return{fixStretching:function fixStretching(a){var c=[];if(Array.isArray(a))c=a;else if("string"==typeof a)c=a.split(" ");else return"";for(var d=[],e="",f=0;f<c.length;f++){for(var l=0;l<c[f].length;l++)0<l&&(c[f][l]===c[f][l-1]?""===e?(d.push({startIndex:l-1,endIndex:l}),e=c[f][l]):d[d.length-1].endIndex=l:e="");if(0<d.length&&"undefined"!=typeof c[f])for(var g="",h=JSON.parse(JSON.stringify(d)),k=0;k<h.length;k++){if(g=b(c[f],h,k),""!==g){c[f]=g;break}h=JSON.parse(JSON.stringify(d))}d=[],e=""}return c},fixShorthand:function fixShorthand(b){var c="",d=[],e="";if(Array.isArray(b))d=b;else if("string"==typeof b)d=b.split(" ");else return"";for(var f=0;f<d.length;f++)e=d[f].match(/([a-zA-Z0-9']*)([\?!\.;+]*)$/),""!=typeof e[2]&&(c=e[2]),e=e[1],"undefined"!=typeof a[e.toLowerCase()]&&(d[f]=a[e.toLowerCase()],""!==c&&(d[f]+=c,c=""));return d}}}function Grammarify_Disconnected(){var a=["awesome","everything","herself","himself","nowhere","today","yourself"];return{fixSeparated:function fixSeparated(b){var c=[];if(Array.isArray(b))c=b;else if("string"==typeof b)c=b.split(" ");else return"";var d=0;if(1<c.length)for(var e=1;e<c.length;e++)d=a.indexOf((c[e-1]+c[e]).toLowerCase()),0<=d&&(c[e-1]=a[d],c.splice(e,1),e--);return c}}}function Grammarify_Numbers(){}